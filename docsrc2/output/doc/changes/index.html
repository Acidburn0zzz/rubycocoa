<!DOCTYPE HTML>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>RubyCocoa - Documentation : Changes</title>
    <link rel="stylesheet" type="text/css" href="/style.css" media="screen">

    <!-- you don't need to keep this, but it's cool for stats! -->
    <meta name="generator" content="nanoc 3.4.1"> 
  </head>
  <body>
    <div id="header">
      <p><a href="/">RubyCocoa</a> - A Ruby/Objective-C Bridge for Mac OS X with Cocoa</p>
    </div>
    <div id="wrapper">
    <div id="main">
      
<h1 id="rubycocoa-changes">RubyCocoa Changes</h1>

<h1 id="changes-107-from-106-2013-10-26">Changes 1.0.7 from 1.0.6: 2013-10-26</h1>

<h2 id="fixes">Fixes</h2>

<ul>
  <li>Fixed boxed Objective-C object sometimes becomes wrong type
OSX::CFTypeRef in Ruby world on 10.9 Mavericks.</li>
</ul>

<h2 id="changes-106-from-105-2012-12-31">Changes 1.0.6 from 1.0.5: 2012-12-31</h2>

<h2 id="fixes-1">Fixes</h2>

<ul>
  <li>Fixed some applications does not launch with 1.0.5.</li>
  <li>Fixed standaloneifi-ed app does not work with rubygems 1.3.2 or later.</li>
</ul>

<h1 id="changes-105-from-104-2012-10-07">Changes 1.0.5 from 1.0.4: 2012-10-07</h1>

<h2 id="improvements">Improvements</h2>

<ul>
  <li>
    <p>project templates are upgraded for Xcode 4.2-4.5.
you can install the templates with the following command.</p>

    <pre><code>$ ruby /Developer/Documentation/RubyCocoa/Templates/install_templates.rb Xcode4.x
</code></pre>
  </li>
</ul>

<h2 id="fixes-2">Fixes</h2>

<ul>
  <li>Fixed standaloneify.rb not work.</li>
</ul>

<h2 id="removals">Removals</h2>

<ul>
  <li>osx/active_record.rb was removed.</li>
</ul>

<h2 id="changes-104-from-103-2012-08-27">changes 1.0.4 from 1.0.3: 2012-08-27</h2>

<h3 id="fixes-3">fixes</h3>

<ul>
  <li>fixed leaks at initializing rubycocoa-1.0.3.</li>
  <li>fixed rubycocoa does not load bridgesupport files under nested framework,
such as “quartzcore.framework/frameworks/coreimage.framework”.</li>
</ul>

<h2 id="changes-103-from-102-2012-08-26-not-released">changes 1.0.3 from 1.0.2: 2012-08-26 (not released)</h2>

<h3 id="improvements-1">improvements</h3>

<ul>
  <li>turn on debug printing by environment rubycocoa_debug.</li>
  <li>
    <p>project templates for xcode 4.x. [experimental]
templates should be installed under ~/library/developer/xcode/templates.
you can try the templates with the following command.</p>

    <pre><code>$ svn export --force \
  https://rubycocoa.svn.sourceforge.net/svnroot/rubycocoa/trunk/src/template/xcode4.x/templates \
  ~/library/developer/xcode/templates
</code></pre>
  </li>
</ul>

<h3 id="fixes-4">fixes</h3>

<ul>
  <li>
    <p>fixed rubycocoa apps fail to launch by xcode-4 “run” with an error
“invalid option -n (-h will show valid options)”.
now rubycocoa apps do not process commandline options such as “-d”.</p>

    <p>if you want to avoid this problem with lion built-in rubycocoa,
edit main.m and rb_main.rb in your project like this.</p>

    <pre><code>diff -ur old/main.m new/main.m
--- old/main.m  2011-11-19 15:49:58.000000000 +0900
+++ new/main.m  2011-11-19 15:49:16.000000000 +0900
@@ -11,5 +11,6 @@
     
 int main(int argc, const char *argv[])
 {
-    return rbapplicationmain("rb_main.rb", argc, argv);
+    rbapplicationinit("rb_main.rb", argc, argv, nil);
+    return nsapplicationmain(argc, argv);
 }
diff -ur old/rb_main.rb new/rb_main.rb
--- old/rb_main.rb      2011-11-19 15:49:58.000000000 +0900
+++ new/rb_main.rb      2011-11-19 15:49:16.000000000 +0900
@@ -17,7 +17,4 @@
   end
 end
     
-if $0 == __file__ then
-  rb_main_init
-  osx.nsapplicationmain(0, nil)
-end
+rb_main_init
</code></pre>

    <p>the api rbapplicationinit() is available since version 0.12.0.
(version of leopard built-in rubycocoa is 0.13.x)</p>
  </li>
  <li>
    <p>fixed nsbundle.loadnibnamed_owner(nibname, owner) fails on lion or later.</p>
  </li>
</ul>

<h2 id="changes-102-from-101-2011-08-31">changes 1.0.2 from 1.0.1: 2011-08-31</h2>

<h3 id="improvements-2">improvements</h3>

<ul>
  <li>osx.load_plist() accepts binary format plist data.</li>
</ul>

<h3 id="fixes-5">fixes</h3>

<ul>
  <li>lion
    <ul>
      <li>fixed segv at working with nsdata or ruby byte string.</li>
      <li>fixed some opaque becomes abrecordref.</li>
      <li>fixed build error with install.rb.</li>
    </ul>
  </li>
  <li>x86_64
    <ul>
      <li>fixed segv passing/getting small c struct contains c array,
such as nsdecimal.</li>
    </ul>
  </li>
</ul>

<h2 id="changes-101-from-100-2009-10-18">changes 1.0.1 from 1.0.0: 2009-10-18</h2>

<h3 id="improvements-3">improvements</h3>

<ul>
  <li>
    <p>rubycocoa.framework built for 10.5 works on 10.6</p>

    <pre><code>$ ruby install.rb config \
       --macosx-deployment-target=10.5 \
       --sdkroot=/developer/sdks/macosx10.5.sdk \
       --target-archs="ppc i386"
$ ruby install.rb setup
</code></pre>
  </li>
  <li>
    <p>nsstring for same string returns same hash in ruby world.
it enables nsstring to become a key of hash.</p>

    <pre><code>str1 = osx::nsstring.alloc.initwithstring("a")
str2 = osx::nsstring.alloc.initwithstring("a")
hash = {}
hash[str1] = 1
hash[str2] = 2
p hash[str1] # =&gt; 2
</code></pre>
  </li>
  <li>refactoring build system for universal binary
    <ul>
      <li>deprecate config option “–build-universal”</li>
      <li>
        <p>introduce config option “–target-archs”</p>

        <pre><code>old) ruby install.rb config --build-universal=yes
new) ruby install.rb config --target-archs="i386 x86_64 ppc"
</code></pre>
      </li>
    </ul>
  </li>
  <li>upgrade project templates for xcode 3.x</li>
</ul>

<h3 id="fixes-6">fixes</h3>

<ul>
  <li>snow leopard
    <ul>
      <li>fixed application stops with errors for thread such as
“assertion failed: (ctx-&gt;autoreleasepool …”</li>
      <li>fixed some errors of invocation-based undo with nsundomanager</li>
    </ul>
  </li>
  <li>x86_64
    <ul>
      <li>correct value of osx::nsnotfound (foudation.bridgesupport is wrong)</li>
      <li>fixed debug log sometimes prints incorrect integer values</li>
      <li>fixed getting values for 64-bit from bridgesupport files</li>
    </ul>
  </li>
  <li>others
    <ul>
      <li>fixed segv irb at `require “osx/cocoa”’</li>
    </ul>
  </li>
</ul>


    </div>
    <div id="sidebar">
      
      <ul>
	  <li><a href="/">Home</a></li>
      </ul>
      
      <h2>The latest version</h2>
      <ul>
	  <li><a href="http://sourceforge.net/projects/rubycocoa/files/RubyCocoa/1.0.7/">1.0.7 (2013-10-26)</a></li>
	  <li><a href="/doc/changes/">Changes</a></li>
      </ul>
      <h2>Documentation</h2>
      <ul>
	<li><a href="/doc/getting-started/">Getting Started</a></li>
	<li><a href="/doc/">Documentation</a></li>
      </ul>
      <h2>Community</h2>
      <ul>
	<li><a href="https://lists.sourceforge.net/lists/listinfo/rubycocoa-talk">rubycocoa-talk</a>(users)</li>
	<li><a href="http://lists.sourceforge.jp/mailman/listinfo/rubycocoa-devel">rubycocoa-devel</a>(developers)</li>
      </ul>
    </div>
    </div>
    <div id="footer">
      <p>The RubyCocoa Project hosted by 
      <a href="http://sourceforge.net">
	<img src="http://sourceforge.net/sflogo.php?group_id=44114&amp;type=4"
	     width="125" height="37" border="0" alt="SourceForge.net"/>
      </a>.
      </p>
    </div>
  </body>
</html>
