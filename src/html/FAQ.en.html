<?xml version="1.0" encoding="us-ascii" ?>
<!DOCTYPE html 
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>RubyCocoa - FAQ</title>
<meta http-equiv="Content-type" content="text/html; charset=us-ascii" />
<link href="rdtext.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1><a name="label:0" id="label:0">RubyCocoa FAQ</a></h1><!-- RDLabel: "RubyCocoa FAQ" -->
<p>$Date$</p>
<h2><a name="label:1" id="label:1">Installation</a></h2><!-- RDLabel: "Installation" -->
<h3><a name="label:2" id="label:2">Q: It failed, when downloading and installing RubyCocoa in the</a></h3><!-- RDLabel: "Q: It failed, when downloading and installing RubyCocoa in the" -->
<p>folder "dl file."</p>
<h4><a name="label:3" id="label:3">A: It seems that an error will be occured when 'ruby install.rb</a></h4><!-- RDLabel: "A: It seems that an error will be occured when 'ruby install.rb" -->
<p>config' if it puts into the directory name which contains a space in
between and extracted. Especially those who use Macintosh only until
now should be careful.</p>
<h2><a name="label:4" id="label:4">After Installation</a></h2><!-- RDLabel: "After Installation" -->
<h3><a name="label:5" id="label:5">Q: I tried to execute a sample script, but I received the error:</a></h3><!-- RDLabel: "Q: I tried to execute a sample script, but I received the error:" -->
<pre>% ruby fontnames.rb
dyld: ruby Undefined symbols:
_init_NSDistributedNotificationCenter
_init_NSScriptStandardSuiteCommands</pre>
<h4><a name="label:6" id="label:6">A: Did you use StuffIt to extract the tgz file of RubyCocoa ?</a></h4><!-- RDLabel: "A: Did you use StuffIt to extract the tgz file of RubyCocoa ?" -->
<p>When using StuffIt, long file name exceed 31 characters are truncated.
Building RubyCocoa with truncated filenames will fail. You must use
the "tar" command in the shell (Terminal application) when extracting
the tgz file:</p>
<pre>% tar zxf rubycocoa-0.1.0.tgz</pre>
<p>And reinstall RubyCocoa.</p>
<p>(thanks Shimura-san)</p>
<h3><a name="label:7" id="label:7">Q: I see a warning on the console when running a RubyCocoa application.</a></h3><!-- RDLabel: "Q: I see a warning on the console when running a RubyCocoa application." -->
<p>When running a Cocoa application, sometimes a warning message about 
memory allocation appears on the Console: </p>
<pre>malloc[2461]: Deallocation of a pointer not malloced: 0x2718b20;
This could be a double free(), or free() called with the middle of
an allocated block; Try setting environment variable MallocHelp to
see tools to help debug</pre>
<h4><a name="label:8" id="label:8">A: Its cause is unknown and is unsolved at this time. (2002-01-08)</a></h4><!-- RDLabel: "A: Its cause is unknown and is unsolved at this time. (2002-01-08)" -->
<p>Although I thought that this problem was solved in version 0.1.2, it
still occurs.  If there is information which you think is likely to be
helpful in tracking down this problem, such as "I can always cause it
by performing these steps", please email me with your configuration,
what I must do to reproduce the error and, if possible, the script you
were running when it happend.</p>
<h3><a name="label:9" id="label:9">Q: Threads do not seem to work properly.</a></h3><!-- RDLabel: "Q: Threads do not seem to work properly." -->
<h4><a name="label:10" id="label:10">A: Are you using release 0.2.1 or later ?</a></h4><!-- RDLabel: "A: Are you using release 0.2.1 or later ?" -->
<p>RubyCocoa release 0.2.1 or later supports Ruby threads. To use a Ruby
thread in an application with an older release of RubyCocoa, change
"ns_app_main" in the file "rb_main.rb" as follows:</p>
<pre>def ns_app_main
  OSX.ruby_thread_switcher_start (0.05)  # switching interval sec
  app = OSX::NSApplication.sharedApplication
  OSX::NSBundle.loadNibNamed_owner (BUNDLE_NAME.to_s, app)
  OSX.NSApp.run
end</pre>
<h3><a name="label:11" id="label:11">Q: I launched SimpleApp1, which results in the message "SimpleApp1 closed unexpectedly."</a></h3><!-- RDLabel: "Q: I launched SimpleApp1, which results in the message "SimpleApp1 closed unexpectedly."" -->
<p>I am having problems getting RubyCocoa working. I built and installed
ruby-1.6.5 and RubyCocoa-0.1.2 with no problems.</p>
<p>Following the instructions on:
&lt;http://www.imasy.or.jp/~hisa/mac/rubycocoa/INSTALL.en.html&gt; I encountered
an error when i tried executing: "open SimpleApp1.app", which results in
an "SimpleApp1 closed unexpectedly." The error it quits with is:</p>
<pre>bash-2.05# ./SimpleApp1.app/Contents/MacOS/SimpleApp1
dyld: ./SimpleApp1.app/Contents/MacOS/SimpleApp1 Undefined symbols:
_dlclose
_dlerror
_dlopen
_dlsym</pre>
<p>I run into the same error trying to build the other examples.
fontnames.rb and sndplay?.rb worked with no problems.  What is causing
this?</p>
<h4><a name="label:12" id="label:12">A: Have you installed any unix-tools packages ?</a></h4><!-- RDLabel: "A: Have you installed any unix-tools packages ?" -->
<p>I am guessing a dyld library is installed by some unix-tool package in
your MacOS X system. This problem seems to occur when the old
EasyPackage is installed on the system.</p>
<p>If my guess is right, two solutions exist. The first is to remove the
dyld library named 'libdl*.bundle' in '/usr/local/lib'. The second is
setting "-ldl" as a linker option in each PB project or Makefile.</p>
<p>The first way may produce unwanted side effects in other installed
commands. The second way is time-consuming.</p>
<p>you can use 'otool -L' command for printing shared library names that
are required by a RubyCocoa applicatoin binary.</p>
<p>The thread
<a href="http://www.ruby-talk.com/cgi-bin/scat.rb/ruby/ruby-talk/29708">[ruby-talk:29708]</a>
also has some references to this problem.</p>
<h2><a name="label:13" id="label:13">Misc.</a></h2><!-- RDLabel: "Misc." -->
<h3><a name="label:14" id="label:14">Q: I want to select a RubyCocoa application template in PB.</a></h3><!-- RDLabel: "Q: I want to select a RubyCocoa application template in PB." -->
<p>I want to select a RubyCocoa application template in the
ProjectBuilder new Project menu.</p>
<h4><a name="label:15" id="label:15">A: Copy "{rubycocoa srcdir}/template/tmpl_pb_based" to</a></h4><!-- RDLabel: "A: Copy "{rubycocoa srcdir}/template/tmpl_pb_based" to" -->
<p>"/Developer/ProjectBuilder Extras/Project Templates/Application/" and
rename it as "RubyCocoa Application".</p>
<pre>% cd "/Developer/ProjectBuilder Extras/Project Templates/Application"
% cp -R {rubycocoa srcdir}/template/tmpl_pb_based "RubyCocoa Application"</pre>
<p>(thanks Shimura-san)</p>

</body>
</html>
