<?xml version="1.0" encoding="us-ascii" ?>
<!DOCTYPE html 
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>RubyCocoa - FAQ</title>
<meta http-equiv="Content-type" content="text/html; charset=us-ascii" />
<link href="rdtext.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1><a name="label:0" id="label:0">RubyCocoa FAQ</a></h1><!-- RDLabel: "RubyCocoa FAQ" -->
<p>$Date$</p>
<h2><a name="label:1" id="label:1">After Install</a></h2><!-- RDLabel: "After Install" -->
<h3><a name="label:2" id="label:2">Q: I tried to execute a sample script, but I received the error:</a></h3><!-- RDLabel: "Q: I tried to execute a sample script, but I received the error:" -->
<pre>% ruby fontnames.rb
dyld: ruby Undefined symbols:
_init_NSDistributedNotificationCenter
_init_NSScriptStandardSuiteCommands</pre>
<h4><a name="label:3" id="label:3">A: Did you use StuffIt to extract tgz file of RubyCocoa?</a></h4><!-- RDLabel: "A: Did you use StuffIt to extract tgz file of RubyCocoa?" -->
<p>Using StuffIt, file names that exceed 31 characters are cut down,
causing the building of RubyCocoa to fail. You must use "tar" command
in the shell (Termianl application) when extracting the .tgz file:</p>
<pre>% tar zxf rubycocoa-0.1.0.tgz</pre>
<p>And reinstall RubyCocoa.</p>
<p>(thanks Shimura-san)</p>
<h3><a name="label:4" id="label:4">Q: I see a warning on the console when running a RubyCocoa application.</a></h3><!-- RDLabel: "Q: I see a warning on the console when running a RubyCocoa application." -->
<p>When running a Cocoa application, sometimes a warning message about 
memory allocation appears on the Console: </p>
<pre>malloc[2461]: Deallocation of a pointer not malloced: 0x2718b20;
This could be a double free(), or free() called with the middle of
an allocated block; Try setting environment variable MallocHelp to
see tools to help debug</pre>
<h4><a name="label:5" id="label:5">A: The cause is unknown. (2002-01-08)</a></h4><!-- RDLabel: "A: The cause is unknown. (2002-01-08)" -->
<p>Although I thought that this problem was solved by 0.1.2, it still
occurs. If there is a definite way to reproduce this, please contact
me.</p>
<h3><a name="label:6" id="label:6">Q: Thread seem not to work properly.</a></h3><!-- RDLabel: "Q: Thread seem not to work properly." -->
<h4><a name="label:7" id="label:7">A: Do you use release 0.2.1 or later ?</a></h4><!-- RDLabel: "A: Do you use release 0.2.1 or later ?" -->
<p>In release 0.2.1 or later, the facility of using a Ruby
thread in a RubyCocoa application is implemeted. For using Ruby threads in a
RubyCocoa application of the older release, correct "ns_app_main" of
"rb_main.rb" as follows:</p>
<pre>def ns_app_main
  OSX.ruby_thread_switcher_start (0.05)  # switching interval sec
  app = OSX::NSApplication.sharedApplication
  OSX::NSBundle.loadNibNamed_owner (BUNDLE_NAME.to_s, app)
  OSX.NSApp.run
end</pre>
<h3><a name="label:8" id="label:8">Q: I launch SimpleApp1, which results in the error message "SimpleApp1 closed unexpectedly."</a></h3><!-- RDLabel: "Q: I launch SimpleApp1, which results in the error message "SimpleApp1 closed unexpectedly."" -->
<p>I am having problems getting RubyCocoa working. I built and installed
ruby-1.6.5 and RubyCocoa-0.1.2 with no problems.</p>
<p>Following the instructions on:
&lt;http://www.imasy.or.jp/~hisa/mac/rubycocoa/INSTALL.en.html&gt; I encountered
an error when i tried executing: "open SimpleApp1.app", which results in
an "SimpleApp1 closed unexpectedly." The error it quits with is:</p>
<pre>bash-2.05# ./SimpleApp1.app/Contents/MacOS/SimpleApp1
dyld: ./SimpleApp1.app/Contents/MacOS/SimpleApp1 Undefined symbols:
_dlclose
_dlerror
_dlopen
_dlsym</pre>
<p>I run into the same error trying to build the other examples.</p>
<p>fontnames.rb and sndplay?.rb worked with no problems.  Have you any ideas
what is causing this?</p>
<h4><a name="label:9" id="label:9">A: Do you have installed some unix-tools package ?</a></h4><!-- RDLabel: "A: Do you have installed some unix-tools package ?" -->
<p>I guess a dyld library is installed by some unix-tool package in your
MacOS X system, mabye. As I know, this problem seems to occur by the
system which old EasyPackage is installed in.</p>
<p>If my guess is right, two solution methods exists. First way is to
remove dyld library named 'libdl*.bundle' in '/usr/local/lib'. Second
way is setting "-ldl" to linker option in each PB project or Makefile
files.</p>
<p>The first way may produce unwanted side effects in other commands. But
the second way is troublesome.</p>
<p>you can use 'otool -L' command for printing shared library names that
are required by a RubyCocoa applicatoin binary.</p>
<p>And the
<a href="http://www.ruby-talk.com/cgi-bin/scat.rb/ruby/ruby-talk/29708">[ruby-talk:29708]</a>
will also become reference of solution.</p>
<h2><a name="label:10" id="label:10">Misc.</a></h2><!-- RDLabel: "Misc." -->
<h3><a name="label:11" id="label:11">Q: I want to select a RubyCocoa application template in PB.</a></h3><!-- RDLabel: "Q: I want to select a RubyCocoa application template in PB." -->
<p>I want to select a RubyCocoa application template in Project Builder
new Project menu.</p>
<h4><a name="label:12" id="label:12">A: copy "{rubycocoa srcdir}/template/tmpl_pb_based" to</a></h4><!-- RDLabel: "A: copy "{rubycocoa srcdir}/template/tmpl_pb_based" to" -->
<p>"/Developer/ProjectBuilder Extras/Project Templates/Application/" and
rename "RubyCocoa Application".</p>
<pre>% cd "/Developer/ProjectBuilder Extras/Project Templates/Application"
% cp -R {rubycocoa srcdir}/template/tmpl_pb_based "RubyCocoa Application"</pre>
<p>(thanks Shimura-san)</p>

</body>
</html>
