<?xml version="1.0" encoding="euc-jp" ?>
<!DOCTYPE html 
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="ja" xml:lang="ja">
<head>
<title>RubyCocoa - INSTALL</title>
<meta http-equiv="Content-type" content="text/html; charset=euc-jp" />
<link href="rdtext.css" type="text/css" rel="stylesheet" />
</head>
<body>
<h1><a name="label:0" id="label:0">RubyCocoa をソースからインストールする</a></h1><!-- RDLabel: "RubyCocoa をソースからインストールする" -->
<h2><a name="label:1" id="label:1">インストールのおおまかな手順</a></h2><!-- RDLabel: "インストールのおおまかな手順" -->
<ul>
<li><a href="#label:2">Ruby のインストール (必要な場合のみ)</a></li>
<li><a href="#label:3">RubyCocoa の展開</a></li>
<li><a href="#label:4">RubyCocoa の構築とインストール</a></li>
<li><a href="#label:5">インストール完了</a></li>
<li><a href="#label:6">サンプルの動作確認</a></li>
</ul>
<p>ソースからのインストールはTerminalアプリケーションなどでシェルからコマ
ンド入力して行います。</p>
<h2><a name="label:2" id="label:2">Ruby のインストール (必要な場合のみ)</a></h2><!-- RDLabel: "Ruby のインストール (必要な場合のみ)" -->
<p>Mac OS X 10.2 (Jaguar) では付属の Ruby を使うことができるので別途 Ruby 
をインストールする必要はありません。また 10.2 以前のシステムで、すでに
Rubyをインストールしている場合は読み飛ばしてください。</p>
<p>Jaguar に Ruby 1.6.7 を別途インストールする場合、RubyCocoa ソース配付
に含まれているパッチを当ててください。OS X 10.1.x の場合このパッチは不
要です。</p>
<pre>% patch -p1 &lt; {RubyCocoaソース}/misc/ruby-1.6.7-osx10.2.patch</pre>
<p>これで準備完了です。以下のように ruby を make します。</p>
<pre>% cd {どこか}
% tar zxf ruby-1.6.7.tar.gz    # tarball を展開
% cd ruby-1.6.7
% ./configure --enable-shared  # /usr/local にインストール
% make ; make test
% sudo make install</pre>
<h2><a name="label:3" id="label:3">RubyCocoa の展開</a></h2><!-- RDLabel: "RubyCocoa の展開" -->
<p>RubyCocoaソースのtarballを展開します。</p>
<pre>% cd {どこか}
% tar zxf rubycocoa-0.x.x.tgz</pre>
<p><em>注意</em> StuffItを使うとファイル名の長さの問題でRubyCocoaが正しくイ
ンストールされないのでtarコマンドを使ってください。</p>
<h2><a name="label:4" id="label:4">RubyCocoa の構築とインストール</a></h2><!-- RDLabel: "RubyCocoa の構築とインストール" -->
<p>RubyCocoaの拡張ライブラリを構築インストールします。</p>
<p>RubyCocoaのソースディレクトリに移動し以下のように入力します。</p>
<pre>% cd {RubyCocoaソースディレクトリ}
% ruby install.rb config
% ruby install.rb setup
% sudo ruby install.rb install</pre>
<p>setupは時間がかかります。お茶でもしながら待ちましょう。</p>
<h2><a name="label:5" id="label:5">インストール完了</a></h2><!-- RDLabel: "インストール完了" -->
<p>以上でインストールは完了です。ここまでの手順でRuby自体の他に</p>
<ul>
<li>RubyCocoaライブラリA    - {site_ruby}/1.6/{archdir}/osx_objc.bundle</li>
<li>RubyCocoaライブラリB    - {site_ruby}/1.6/osx/*.rb</li>
<li>RubyCocoaライブラリB    - {site_ruby}/1.6/osx/objc/*.rb</li>
</ul>
<p>がインストールされました。</p>
<h2><a name="label:6" id="label:6">サンプルの動作確認</a></h2><!-- RDLabel: "サンプルの動作確認" -->
<p>サンプルディレクトリに移動して簡単なスクリプトを実行してみましょう。</p>
<pre>% cd {RubyCocoaソースディレクトリ}/sample
% ruby fontnames.rb  # フォント名がずらずらと出力されます
% ruby sndplay.rb    # システムの警告音が順番に鳴ります
% ruby sndplay2.rb   # システムの警告音が順番に間隔を詰めて鳴ります</pre>
<p>うまく動作したでしょうか？うまくいったら次にRubyCocaアプリケーションを
動かしてみましょう。まずはすでに完成しているものを動かしてみましょう。</p>
<pre>% cd {RubyCocoaソースディレクトリ}/sample
% open SimpleApp1.app</pre>
<p>次にMakefileベースのものを試してみましょう。</p>
<pre>% cd {RubyCocoaソースディレクトリ}/sample/mk_app1
% make</pre>
<p>で構築します。できたら実行してみましょう。そのままコマンドラインから</p>
<pre>% open SimpleApp1.app</pre>
<p>と入力するか、ファインダで SimpleApp1 をダブルクリックして起動してみて
ください。動きましたか。次にProject Builderベースのものを試してみましょ
う。コマンドラインから</p>
<pre>% cd {RubyCocoaソースディレクトリ}/sample/pb_app1
% pbxbuild      # アプリケーション作成</pre>
<p>として構築します。もちろん Project Builder を起動してその中で構築した
り実行したりすることもできます。実行してみましょう。</p>
<pre>% open build/pb_app1.app</pre>
<p>と打ち込むか、またはファインダでbuildディレクトリの中のpb_app1をダブル
クリックしてアプリケーションを起動してみてください。うまく動きましたか？</p>
<h2><a name="label:7" id="label:7">開発動作確認環境</a></h2><!-- RDLabel: "開発動作確認環境" -->
<p>以下の環境で開発動作確認をしています。</p>
<ul>
<li>PowerMacintosh G4/400/384MB or iBook G3/600/384MB</li>
<li>Mac OS X 10.2</li>
<li>DevTools 10.2</li>
<li>ruby-1.6.7 (pre-installed in Mac OS X 10.2)</li>
</ul>
<h2><a name="label:8" id="label:8">ではお楽しみください</a></h2><!-- RDLabel: "ではお楽しみください" -->
<p>感想、アイデア、提案、疑問、質問などなんでも気軽に教えてください。</p>
<p>藤本尚邦 &lt;hisa@imasy.or.jp&gt;
$Date$ $Revision$</p>

</body>
</html>
