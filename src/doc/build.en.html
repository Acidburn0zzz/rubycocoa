<?xml version='1.0' encoding='US-ASCII'?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html lang='en' xml:lang='en' xmlns='http://www.w3.org/1999/xhtml'>

<head>
  <title>RubyCocoa - Build and Installation RubyCocoa from Source</title>
  <meta content='text/html; charset=us-ascii' http-equiv='Content-type'/>
  <meta name='Content-Language' content='en'/>
  <link href='rubycocoasite.css' rel='stylesheet' type='text/css'/>
</head>

<body>

<!-- main table -->
<table cellspacing='0' cellpadding='0' width='100%'>
<colgroup><col width='100%'/></colgroup>

<!-- body/header - title -->
<tr class='site-title'><td width='100%'>
RubyCocoa<font size='-1'> - A Ruby/Objective-C Bridge for Mac OS X with Cocoa</font>
</td></tr>

<!-- body/header - menubar -->
<tr class='site-menubar'><td width='100%'>
<table cellspacing='0' cellpadding='2' width='100%'>
  <colgroup><col width='80%'/><col width='20%'/></colgroup>
  <tr id='site-menubar'>
  <td align='left'>
    <a href='index.en.html'>What?</a> |
    <a href='getting.en.html'>Donwload</a> |
    <a href='build.en.html'>Build & Install</a> |
    <a href='trysamples.en.html'>Try Samples</a> |
    <a href='programming.en.html'>Programming</a> |
    <a href='references.en.html'>References</a> |
    <a href='changes.en.html'>Changes</a> |
    <a href='changelog.html'>ChangeLog</a> |
    <a href='faq.en.html'>FAQ</a> |
    <a href='links.en.html'>Links</a>
  </td>
  <td align='right'>
    [English] <a href='index.ja.html'>[Japanese]</a>
  </td>
</tr>
</table>
</td></tr>

<!-- body/main -->
<tr><td width='100%'>
<table cellspacing='0' cellpadding='12' width='100%'>
  <colgroup><col width='80%'/><col width='20%'/></colgroup>
  <tr>

<!-- body/main/contents -->
<td class='body-contents' id='body-contents' valign='top'>
<h1><a name='label:0' id='label:0'>Build and Installation RubyCocoa from Source</a></h1><!-- RDLabel: "Build and Installation RubyCocoa from Source" -->
<p>This document is described about build and installation of RubyCocoa
0.4 from source. You don't need to read this if binary distribution of
RubyCocoa have been installed already.</p>
<p>Build/Installation would be done on shell command with Terminal
application or etc. In this document, it's assumed to use 'bash' in
shell command input example. When other shell (e.g. tcsh) is used,
please read suitably.</p>
<h2><a name='label:1' id='label:1'>Procedure of Build and Installation</a></h2><!-- RDLabel: "Procedure of Build and Installation" -->
<p>The following procedures perform build and installation.</p>
<ul>
<li><a href='Build'>Installation of Ruby</a></li>
<li><a href='#label:8'>Build of RubyCocoa</a></li>
<li><a href='#label:9'>Unit Test for RubyCocoa</a></li>
<li><a href='#label:10'>Installation of RubyCocoa</a></li>
</ul>
<p>On somewhere directory, extract RubyCocoa source from the '.tgz' file.</p>
<pre>$ cd {somewhere}
$ tar zxf rubycocoa-0.4.0.tar.gz</pre>
<p><em>Caution!</em> Using StuffIt, building RubyCocoa will fail
because of a file name length problem. </p>
<h2><a name='label:2' id='label:2'>Build/Installation of Ruby</a></h2><!-- RDLabel: "Build/Installation of Ruby" -->
<p>To build RubyCocoa, Some C language header files and libruby of Ruby
is required. Here, the build procedure of Ruby which serves as a base
of RubyCocoa in the case shown below at an example is explained.</p>
<ul>
<li>Ruby 1.8 installed from source</li>
<li>Ruby 1.6.7 included in Mac OS X 10.2</li>
</ul>
<p>A case of the latter is equivalent to a case of a RubyCocoa 0.4 binary
package. When Ruby is installed using packages, such as
<a href='http://fink.sf.net/'>Fink</a>, please read and change according
to it.</p>
<h3><a name='label:3' id='label:3'>Ruby 1.8 installed from source</a></h3><!-- RDLabel: "Ruby 1.8 installed from source" -->
<p>It moves to the sauce directory of Ruby 1.8, and builds and installs
as follows. Please change an option if needed.
<a name='footmark:1' href='#foottext:1' id='footmark:1'><sup><small>*1</small></sup></a></p>
<pre>$ CFLAGS='-g -O2 -fno-common' ./configure
$ make
$ make test
$ sudo make install
$ sudo ranlib /usr/local/lib/libruby-static.a</pre>
<h3><a name='label:4' id='label:4'>Ruby 1.6.7 included in Mac OS X 10.2</a></h3><!-- RDLabel: "Ruby 1.6.7 included in Mac OS X 10.2" -->
<h4><a name='label:5' id='label:5'>The check of the Mac OS X package installed already</a></h4><!-- RDLabel: "The check of the Mac OS X package installed already" -->
<p>The required package (BSD.pkg and BSDSDK.pkg) may not be installed
according to the option setup when installing Mac OS X 10.2. Please
check whether first of all, Ruby is installed, and if required,
install.</p>
<pre>$ ls -dF /Library/Receipts/BSD*.pkg
/Library/Receipts/BSD.pkg/   /Library/Receipts/BSDSDK.pkg/</pre>
<p>Although Ruby is contained in Mac OS X 10.2, what reason or libruby is
not contained. Therefore, to build RubyCocoa, it is necessary to make
libruby from the sauce of Ruby 1.6.7.</p>
<h4><a name='label:6' id='label:6'>apply patch to Ruby 1.6.7 source</a></h4><!-- RDLabel: "apply patch to Ruby 1.6.7 source" -->
<p>Extract source from Ruby 1.6.7 '.tgz' file, and apply the patch which
is contained in RubyCocoa to Ruby 1.6.7.</p>
<pre>$ cd {somewhere}
$ tar zxf ruby-1.6.7.tar.gz
$ cd ruby-1.6.7
$ patch -p1 &lt; {RubyCocoa source}/ruby-1.6.7-osx10.2.patch</pre>
<h4><a name='label:7' id='label:7'>build/installation of libruby</a></h4><!-- RDLabel: "build/installation of libruby" -->
<p>Ruby 1.6.7 is built so that the environment of the Mac OS X attachment
Ruby may be suited.
<a name='footmark:2' href='#foottext:2' id='footmark:2'><sup><small>*2</small></sup></a></p>
<pre>$ rbhost=`ruby -r rbconfig -e "print Config::CONFIG['host']"`
$ CFLAGS='-g -O2 -fno-common' ./configure --prefix=/usr --host=$rbhost
$ make
$ make test</pre>
<p>install only libruby.a.</p>
<pre>$ ranlib libruby.a
$ rubyarchdir=`ruby -r rbconfig -e 'print Config::CONFIG["archdir"]'`
$ sudo install -m 0644 libruby.a $rubyarchdir</pre>
<h2><a name='label:8' id='label:8'>Build of RubyCocoa</a></h2><!-- RDLabel: "Build of RubyCocoa" -->
<p>Type as follows for build RubyCocoa:</p>
<pre>$ ruby install.rb --help   # print all options
$ ruby install.rb config
$ ruby install.rb setup</pre>
<p>'ruby install.rb config' command have some options for RubyCocoa. If
required, specify option at the time of a config phase.</p>
<h2><a name='label:9' id='label:9'>Unit Test for RubyCocoa</a></h2><!-- RDLabel: "Unit Test for RubyCocoa" -->
<pre>$ cd {source}/tests
$ DYLD_FRAMEWORK_PATH={source}/framework/build ruby -I../lib testall.rb</pre>
<p>Test::Unit (testunit-0.1.5) is required for unit test.</p>
<h2><a name='label:10' id='label:10'>Installation of RubyCocoa</a></h2><!-- RDLabel: "Installation of RubyCocoa" -->
<pre>$ sudo ruby install.rb install</pre>
<p>Installation is completion above. The following were installed:
old procedure.</p>
<ul>
<li>/Library/Frameworks/RubyCocoa.framework     : framework (real)</li>
<li>{sitedir}/{ruby_version}/osx/addressbook.rb : library (stub)</li>
<li>{sitedir}/{ruby_version}/osx/appkit.rb      : library (stub)</li>
<li>{sitedir}/{ruby_version}/osx/cocoa.rb       : library (stub)</li>
<li>{sitedir}/{ruby_version}/osx/foundation.rb  : library  (stub)</li>
<li>{sitearchdir}/rubycocoa.bundle              : extended library (stub)</li>
</ul>
<p>After installation, let's try samples that are written by Ruby. Refer
to <a href='trysamples.en.html'>'Try RubyCocoa Samples'</a>.</p>
<h2><a name='label:11' id='label:11'>Development and testing environment</a></h2><!-- RDLabel: "Development and testing environment" -->
<ul>
<li>PowerMacintosh G4/400/384MB or iBook G3/600/384MB</li>
<li>Mac OS X 10.2.3</li>
<li>DevTools 10.2</li>
<li>ruby-1.6.7 (pre-installed in Mac OS X 10.2)</li>
<li>ruby-1.8 (preview 1 from cvs server)</li>
</ul>
<h2><a name='label:12' id='label:12'>Have a fun</a></h2><!-- RDLabel: "Have a fun" -->
<p>Feel free to send comments, bug reports and patches for RubyCocoa.</p>
<p>$Date$</p>
<hr/>
<p class='foottext'>
<a name='foottext:1' href='#footmark:1' id='foottext:1'><sup><small>*1</small></sup></a><small> RubyCocoa.framework cannot be linked without specify the
'-fno-common' option for CFLAGS. </small><br/>
<a name='foottext:2' href='#footmark:2' id='foottext:2'><sup><small>*2</small></sup></a><small> RubyCocoa.framework cannot be linked without specify the
'-fno-common' option for CFLAGS. </small><br/>
</p>
</td>

<!-- body/main/sidebar -->
<td class='body-sidebar' valign='top'>

<!-- <div id="sidebar-news"> -->
<!--   <h2 class="body-sidebar"><a href="news.ja.html">News</a></h2> -->
<!--   <ul class="body-sidebar"> -->
<!--     <li><a href="news.ja.html#news:0">RubyCocoa 0.4 release out (2002.12.24)</a></li> -->
<!--     <li><a href="news.ja.html#news:1">relocate home page (2002.12.24)</a></li> -->
<!--   </ul> -->
<!-- </div> -->
<!-- id="sidebar-news" -->

<div id='sidebar-contents'>
  <h2 class='body-sidebar'>Contents</h2>
  <ul class='body-sidebar'>
    <li><a href='index.en.html'>What is RubyCocoa?</a></li>
    <li><a href='getting.en.html'>Getting RubyCocoa</a></li>
    <li><a href='build.en.html'>Build & Install from Source</a></li>
    <li><a href='trysamples.en.html'>Try Samples</a></li>
    <li><a href='programming.en.html'>Programming</a></li>
    <li><a href='references.en.html'>References</a></li>
    <li><a href='changes.en.html'>Changes</a></li>
    <li><a href='chagelog.html'>ChangeLog</a></li>
    <li><a href='faq.en.html'>FAQ</a></li>
    <li><a href='links.en.html'>Links</a></li>
  </ul>
</div>

<div id='sidebar-links'>
  <h2 class='body-sidebar'><a href='links.en.html'>Links</a></h2>
  <ul class='body-sidebar'>
    <li><a href='http://www.imasy.or.jp/~hisa/mac/rubycocoa/'>RubyCocoa</a></li>
    <li><a href='http://www.imasy.or.jp/~hisa/mac/rubyaeosa/'>RubyAEOSA</a></li>
    <li><a href='http://www.freeml.com/info/rubycocoa@freeml.com'>Maling List (Japanese)</a></li>
    <li><a href='http://sourceforge.net/mail/?group_id=44114'>Maling list (English)</a></li>
    <li><a href='http://sourceforge.net/projects/rubycocoa/'>RubyCocoa Project</a></li>
    <li><a href='http://mwave.sppd.ne.jp/diary/calc_app/calc_app1.html'>Tutorial (Japanese)</a></li>
  </ul>
</div>

</td> <!-- end of body/main/sidebar -->

</tr></table></td></tr> <!-- end of body/main -->

<!-- body/footer -->
<tr class='body-footer'><td width='100%'>
<table cellspacing='4' cellpadding='0' width='100%'>
  <tr>
    <td align='left'>
      <a href='http://sourceforge.net'>
	<img src='http://sourceforge.net/sflogo.php?group_id=44114&amp;type=4' border='0' height='37' alt='SourceForge.net Logo' width='125'/>
	</a>
      </td>
  </tr>
</table>
</td></tr>

</table> <!-- end of main table -->
</body>
</html>